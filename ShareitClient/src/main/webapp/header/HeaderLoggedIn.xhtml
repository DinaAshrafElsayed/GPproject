<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:o="http://omnifaces.org/ui">

    <div id="top">
        <div class="container">
            <h:form>
                <div class="col-md-6 offer" data-animate="fadeInDown">
                    <!--<a href="#" class="btn btn-success btn-sm" data-animate-hover="shake">Register</a>-->
                    <h:commandLink pt:data-animate-hover="shake" class="btn btn-success btn-sm" action="register.xhtml?faces-redirect=true"> Register now and get 100 points for free</h:commandLink>
                </div>
            </h:form>

            <c:if test="#{user.userDto != null}">
                <div class="collapse navbar-collapse" style="float: right;">

                    <ul class="nav navbar-nav navbar-right" >
                        <li class="dropdown">
                            <a href="#"  data-toggle="dropdown">
                                <span  class="fa fa-user"></span>
                                <strong>#{user.userDto.username}</strong>
                                <span class="fa fa-chevron-down"></span>
                            </a>
                            <ul class="dropdown-menu" >
                                <h:form>
                                    <li>
                                        <div class="navbar-login" style=" width: 305px;
                                             padding: 10px;
                                             padding-bottom: 0px; color: black;">
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <p class="text-center">

                                                        <o:graphicImage value="#{user.getImage(user.userDto.imageUrl)}" class="img-rounded" width="100" height="100"  dataURI="true" /> 
                                                    </p>
                                                </div>

                                                <div class="col-lg-8">
                                                    <p class="text-left" style="font-weight: bold;"><strong>#{user.userDto.username}</strong></p>
                                                    <p class="text-left small">#{user.userDto.email}</p>
                                                    <p class="text-left">
                                                        <h:commandLink action="#{user.goToProfile(user.userDto.id)}" class="btn btn-primary btn-block btn-sm">Profile</h:commandLink>
                                                    </p>
                                                </div>

                                            </div>
                                        </div>
                                    </li>

                                    <li class="divider navbar-login-session-bg" style=" padding: 10px;
                                        padding-bottom: 0px;
                                        padding-top: 0px;"></li>

                                    <h:commandLink class="list-group-item list-group-item"  action="#{user.logout()}" style="color: black;" >Account Settings <span class="glyphicon glyphicon-cog pull-right"></span></h:commandLink>


                                    <h:commandLink class="list-group-item list-group-item"  action="#{user.logout()}" style="color: black;" >Messages <span class="badge pull-right"> 42 </span></h:commandLink>

                                    <h:commandLink class="list-group-item list-group-item"  action="#{user.logout()}" style="color: black;" >Favourites Snippets <span class="glyphicon glyphicon-heart pull-right"></span></h:commandLink>


                                    <h:commandLink class="list-group-item list-group-item-info"  action="#{user.logout()}" style="color: black;" >Sign Out <span class="fa fa-sign-out pull-right"></span></h:commandLink>
                                </h:form>
                            </ul>
                        </li>
                    </ul>
                </div>
            </c:if>
            <div class="col-md-6" data-animate="fadeInDown">
                <h:form>
                    <ul class="menu">
                        <c:if test="#{user.getUserDto() == null}">
                            <li><a href="#" data-toggle="modal" data-target="#login-modal"> <span class="fa fa-sign-in"></span> Login</a></li>
                        </c:if>
                    </ul>
                </h:form>
            </div>

        </div>

        <!-- /top navigation -->

        <div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="Login" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="Login">User login</h4>
                    </div>
                    <div class="modal-body">
                        <h:form>
                            <div class="form-group">
                                <h:inputText class="form-control" value="#{user.email}" id="email-modal" pt:placeholder="email" required="true"/>
                            </div>
                            <div class="form-group">
                                <h:inputSecret class="form-control" value="#{user.password}" id="password-modal" pt:placeholder="password" required="true"/>
                            </div>
                            <div class="form-group">
                                <p class="text-center">
                                    <h:commandLink action="#{user.login()}" class="btn btn-primary" style="color: white;"><i class="fa fa-sign-in"></i> Log in</h:commandLink>
                                </p>
                            </div>
                        </h:form>

                        <p class="text-center text-muted">Not registered yet?</p>
                        <p class="text-center text-muted"><h:form><h:commandLink action="register.xhtml"><strong>Register now</strong></h:commandLink></h:form>It is easy and done in 1&nbsp;minute!</p>

                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- *** TOP BAR END *** -->
    <!-- end of header ............................................ -->
</ui:composition>
